#ifndef SCARA_CONTROLLER_H
#define SCARA_CONTROLLER_H

///////////////////////////////////////////////////////////////
/////////////////// HARDWARE ABSTRACT LAYER ///////////////////
///////////////////////////////////////////////////////////////

#include "i2c_multiplexer.h"
#define I2C_ADDR_TCA 0x70
#define I2C_ADDR_AS5600 0x36

#define GPIO_I2C_SCL GPIO_NUM_22
#define GPIO_I2C_SDA GPIO_NUM_21

#define I2C_PORT I2C_NUM_0
#define I2C_MASTER_GLITCH_IGNORE_CNT 7
#define I2C_ENABLE_INTERNAL_PULLUP true
#define I2C_DEVICE_SPEED_HZ 100000

#include "encoder.h"
#define ENCODER_MSB_ANGLE_REG 0x0E
#define ENCODER_ANGLE_MASK 0x0FFF

#include "motor.h"
#define MOTOR_X 1
#define MOTOR_Y 2
#define MOTOR_Z 3

#define GPIO_X_DIR GPIO_NUM_16
#define GPIO_Y_DIR GPIO_NUM_27
#define GPIO_Z_DIR GPIO_NUM_14
#define GPIO_B_DIR GPIO_NUM_23

#define GPIO_X_STP GPIO_NUM_26
#define GPIO_Y_STP GPIO_NUM_25
#define GPIO_Z_STP GPIO_NUM_17
#define GPIO_B_STP GPIO_NUM_5

#include "motor_d.h"
#include "switch_h.h"


///////////////////////////////////////////////
/////////////////// DRIVERS ///////////////////
///////////////////////////////////////////////

#include "driver/i2c_master.h"

///////////////////////////////////////////////
/////////////////// DEVICES ///////////////////
///////////////////////////////////////////////

///////////////////////////////////////////////
/////////////////// CONTROL ///////////////////
///////////////////////////////////////////////

///////////////////////////////////////////////
///////////////////// APP /////////////////////
///////////////////////////////////////////////

#include "scara_tasks.h"

///////////////////////////////////////////////
/////////////////// NETWORK ///////////////////
///////////////////////////////////////////////

#include "wifi_manager.h"

#define PORT 42424
#define WIFI_SSID "lucas"
#define WIFI_PASS "dahyuntwice"

#define RX_BUFFER_SIZE 128
#define ADDR_STR_SIZE 128

void init_scara();
void loop_scara();

#endif // SCARA_CONTROLLER_H
